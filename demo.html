<!DOCTYPE html>
<html>
<head>
    <title>Hello Qunee</title>
    <meta charset="utf-8">
</head>
<body>
<div style="position: absolute; width: 100%; top: 0px; bottom: 0px;" id="canvas" ></div>
<script src="source/qunee/js/qunee-min.js"></script>
<script src="source/qunee/js/graphs.js"></script>
<script src="source/qunee/js/qunee-functions.js"></script>
<script>
function createSubGroup(name,x, y,network, renderColor){
    var group = createGroup();
    group.name = name;
    if(renderColor){
        group.setStyle(Q.Styles.RENDER_COLOR, renderColor);
    }
    var a = createImageNode("Router", 49 + x, 100 + y,"router.png" , group);
    var b = createImageNode("Switch", 191 + x, 100 + y,"exchange.png" , group);
    var c = createImageNode( "PC", 313 + x, 100 + y,"pc.png", group);
    createText(network, 191 + x, 160 + y, 14, Colors.dark, group);
    createEdge("",a, b, "#45E");
    createEdge("",c, b, "#45E");
    return a;
}

var VPNFlexEdgeUI = function(edge, graph){
    Q.doSuperConstructor(this, VPNFlexEdgeUI, arguments);
}
VPNFlexEdgeUI.prototype = {
    drawEdge: function(path, fromUI, toUI, edgeType, fromBounds, toBounds){
        var from = fromBounds.center;
        path.curveTo(from.x, from.y, internet.x, internet.y);
    }
}
Q.extend(VPNFlexEdgeUI, Q.EdgeUI);
var cloud_group = createGroup(100);
graph.styles = {};
graph.styles[Q.Styles.LABEL_FONT_SIZE] = 16;



//var qunee = createCVMNode("Qunee", 100, 50);
var ip1 = "WanIp:100.1.100.1 \n LanIP:10.1.10.1";
var ip2 = "WanIp:100.1.100.2 \n LanIP:10.1.10.2";
var ip3 = "WanIp:100.1.100.3 \n LanIP:10.1.10.3";
var cloud_server1 = createServerNode(ip1,140,0,cloud_group);
var cloud_server2 = createServerNode(ip2,340,0,cloud_group);
var cloud_server3 = createServerNode(ip3,340,200,cloud_group);
var cloud_switch = createSwitchNode("Switch",140,200,cloud_group);
createText("Public Cloud", 250, -80, 24, Colors.dark, cloud_group);
createEdge("",cloud_server1, cloud_switch, "#45E");
createEdge("",cloud_server2, cloud_switch, "#45E");
createEdge("",cloud_server3, cloud_switch, "#45E");

var internet = createImageNode( "Internet", 600, 295,graphs.group_cloud);
internet.setStyle(Q.Styles.LABEL_ANCHOR_POSITION, Q.Position.CENTER_MIDDLE);
internet.setStyle(Q.Styles.LABEL_POSITION, Q.Position.CENTER_MIDDLE);
internet.setStyle(Q.Styles.LABEL_FONT_SIZE, 24);
internet.setStyle(Q.Styles.LABEL_FONT_STYLE, "bold");
internet.size = {width: 200};


remote = createTerminal("Remote Access",900,-50);


createEdge("",cloud_group, internet, "#45E");

sub1 = createSubGroup("Beijing",700,100,"192.168.2.0/24")
sub2 = createSubGroup("Tianjin",700,300,"192.168.3.0/24")

createEdge("",sub1, internet, "#45E");
createEdge("",sub2, internet, "#45E");
createEdge("",remote, internet, "#45E");


createEdge("IPsec",sub1, cloud_server3, "#F80", true).uiClass = VPNFlexEdgeUI;
createEdge("IPsec",sub2, cloud_server3, "#F80", true).uiClass = VPNFlexEdgeUI;
createEdge("OPENVPN \n 172.16.1.0/24",remote, cloud_server3, "#F80", true).uiClass = VPNFlexEdgeUI;
</script>
</body>
</html>